<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Developer Text & Data Utilities</title>
<style>
  :root {
    --bg: #0f172a;        /* slate-900 */
    --card: #111827;      /* gray-900 */
    --muted: #94a3b8;     /* slate-400 */
    --text: #e5e7eb;      /* gray-200 */
    --accent: #22d3ee;    /* cyan-400 */
    --accent-2: #60a5fa;  /* blue-400 */
    --ok: #22c55e;
    --warn: #f59e0b;
    --err: #ef4444;
    --border: #1f2937;    /* gray-800 */
  }
  * { box-sizing: border-box; }
  html, body {
    height: 100%;
    background: radial-gradient(1200px 600px at 20% -10%, rgba(34,211,238,.08), transparent 60%),
                radial-gradient(1200px 600px at 120% 10%, rgba(96,165,250,.08), transparent 60%),
                var(--bg);
    color: var(--text);
    font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
    margin: 0;
  }
  
  /* Layout */
  .app {
    display: flex;
    height: 100vh;
    overflow: hidden;
  }
  
  /* Sidebar */
  .sidebar {
    width: 320px;
    background: rgba(17, 24, 39, 0.5);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  
  .sidebar-header {
    padding: 20px;
    border-bottom: 1px solid var(--border);
  }
  
  .sidebar-header h1 {
    margin: 0 0 6px;
    font-size: 18px;
    letter-spacing: .2px;
  }
  
  .sidebar-header .sub {
    color: var(--muted);
    font-size: 12px;
  }
  
  /* Search */
  .search-container {
    padding: 16px;
    border-bottom: 1px solid var(--border);
  }
  
  .search-input {
    width: 100%;
    background: #0b1220;
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px 40px 10px 12px;
    outline: none;
    transition: border-color 0.2s;
  }
  
  .search-input:focus {
    border-color: var(--accent);
  }
  
  .search-container {
    position: relative;
  }
  
  .search-icon {
    position: absolute;
    right: 28px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--muted);
    pointer-events: none;
  }
  
  /* Tool List */
  .tool-list {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
  }
  
  .tool-item {
    padding: 12px 16px;
    margin-bottom: 4px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.15s;
    border: 1px solid transparent;
  }
  
  .tool-item:hover {
    background: rgba(34, 211, 238, 0.05);
    border-color: rgba(34, 211, 238, 0.2);
  }
  
  .tool-item.active {
    background: linear-gradient(90deg, rgba(34, 211, 238, 0.1), rgba(96, 165, 250, 0.1));
    border-color: var(--accent);
  }
  
  .tool-item h3 {
    margin: 0 0 4px;
    font-size: 14px;
    font-weight: 600;
  }
  
  .tool-item .desc {
    color: var(--muted);
    font-size: 12px;
  }
  
  .tool-item .tag {
    display: inline-block;
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 999px;
    background: rgba(34, 211, 238, 0.1);
    color: var(--accent);
    margin-left: 8px;
  }
  
  /* Main Content */
  .main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  
  .tool-view {
    flex: 1;
    padding: 40px;
    overflow-y: auto;
    display: none;
  }
  
  .tool-view.active {
    display: block;
  }
  
  .tool-content {
    max-width: 800px;
    margin: 0 auto;
  }
  
  .tool-header {
    margin-bottom: 32px;
  }
  
  .tool-header h2 {
    margin: 0 0 12px;
    font-size: 28px;
    letter-spacing: .2px;
  }
  
  .tool-description {
    color: var(--muted);
    font-size: 15px;
    line-height: 1.6;
    margin-bottom: 16px;
  }
  
  .tool-docs {
    background: rgba(34, 211, 238, 0.05);
    border: 1px solid rgba(34, 211, 238, 0.2);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 24px;
  }
  
  .tool-docs h4 {
    margin: 0 0 8px;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--accent);
  }
  
  .tool-docs p {
    margin: 0 0 8px;
    font-size: 13px;
    line-height: 1.6;
  }
  
  .tool-docs code {
    background: rgba(0, 0, 0, 0.3);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    font-size: 12px;
  }
  
  /* Welcome Screen */
  .welcome {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 40px;
  }
  
  .welcome h2 {
    font-size: 24px;
    margin-bottom: 12px;
  }
  
  .welcome p {
    color: var(--muted);
    font-size: 15px;
    max-width: 400px;
    margin: 0 auto 24px;
  }
  
  .shortcuts {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    display: inline-block;
  }
  
  .shortcuts h3 {
    font-size: 14px;
    margin: 0 0 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--accent);
  }
  
  .shortcut-item {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
    font-size: 13px;
  }
  
  .shortcut-key {
    background: #0b1220;
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 4px 8px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    font-size: 11px;
    min-width: 40px;
    text-align: center;
  }
  
  /* Form Elements */
  label { 
    font-size: 12px; 
    color: var(--muted); 
    display: block;
    margin-bottom: 6px;
  }
  
  textarea, input[type="text"] {
    width: 100%;
    background: #0b1220;
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px 12px;
    min-height: 44px;
    outline: none;
    transition: border-color 0.2s;
  }
  
  textarea:focus, input[type="text"]:focus {
    border-color: var(--accent);
  }
  
  textarea { min-height: 120px; resize: vertical; }
  
  pre.output, textarea.output {
    width: 100%;
    background: #0b1220;
    color: var(--text);
    border: 1px dashed #263247;
    border-radius: 10px;
    padding: 10px 12px;
    min-height: 80px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  
  .btn {
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    color: #001018;
    border: 0;
    border-radius: 999px;
    padding: 10px 20px;
    font-weight: 600;
    cursor: pointer;
    transition: transform .02s ease-in-out, filter .15s ease;
  }
  
  .btn:hover { filter: brightness(1.05); }
  .btn:active { transform: translateY(1px); }
  
  .btn.secondary {
    background: transparent;
    color: var(--text);
    border: 1px solid #22304b;
  }
  
  .btn.small { padding: 6px 12px; font-size: 12px; }
  
  .toolbar {
    display: flex; 
    gap: 8px; 
    align-items: center; 
    justify-content: flex-end; 
    margin-top: 12px;
  }
  
  .status { font-size: 12px; margin-left: 8px; }
  .status.ok { color: var(--ok); }
  .status.err { color: var(--err); }
  
  .two {
    display: grid; 
    grid-template-columns: 1fr 1fr; 
    gap: 16px;
    margin-bottom: 16px;
  }
  
  .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
  
  details summary {
    cursor: pointer;
    list-style: none;
    user-select: none;
    font-weight: 600;
  }
  details summary::-webkit-details-marker { display: none }
  
  /* Mobile */
  @media (max-width: 768px) {
    .app { flex-direction: column; }
    .sidebar { 
      width: 100%; 
      height: auto;
      max-height: 50vh;
      border-right: none;
      border-bottom: 1px solid var(--border);
    }
    .tool-view { padding: 20px; }
    .two { grid-template-columns: 1fr; }
  }
  
  /* Hidden initially */
  .tool-view { display: none; }
  .tool-view.active { display: block; }
</style>
</head>
<body>

<div class="app">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h1>Developer Utilities</h1>
      <div class="sub">Quick text & data transformations ‚Ä¢ All in-browser</div>
    </div>
    
    <div class="search-container">
      <input type="text" class="search-input" id="searchInput" placeholder="Search tools... (‚åòK)" autocomplete="off" />
      <span class="search-icon">üîç</span>
    </div>
    
    <div class="tool-list" id="toolList">
      <!-- Tool items will be inserted here -->
    </div>
  </aside>

  <!-- Main Content Area -->
  <main class="main">
    <!-- Welcome Screen -->
    <div class="welcome" id="welcomeScreen">
      <div>
        <h2>Welcome to Developer Utilities</h2>
        <p>Select a tool from the sidebar to get started. All processing happens locally in your browser.</p>
        <div class="shortcuts">
          <h3>Keyboard Shortcuts</h3>
          <div class="shortcut-item">
            <span class="shortcut-key">‚åòK</span>
            <span>Search tools</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key">‚Üë‚Üì</span>
            <span>Navigate tools</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key">Enter</span>
            <span>Select tool / Run action</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key">Esc</span>
            <span>Clear search</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Tool Views (hidden by default) -->
    
    <!-- 1) Text ‚Üí JavaScript String Literal -->
    <section class="tool-view" id="js-string-view">
      <div class="tool-content">
        <div class="tool-header">
          <h2>Text ‚Üí JavaScript String Literal</h2>
          <p class="tool-description">
            Convert any text into a properly escaped JavaScript string literal. Handles newlines, quotes, backslashes, and special characters automatically.
          </p>
          <div class="tool-docs">
            <h4>How it works</h4>
            <p>Uses <code>JSON.stringify()</code> to produce a valid double-quoted JavaScript string literal that can be safely pasted into your code.</p>
            <p><strong>Example:</strong> Text with "quotes" and newlines becomes <code>"Text with \"quotes\" and\nnewlines"</code></p>
          </div>
        </div>
        
        <div>
          <label for="jsStrIn">Input Text</label>
          <textarea id="jsStrIn" placeholder="Paste any text here (newlines, quotes, special characters, etc.)"></textarea>
          
          <label style="margin-top: 16px;">Output (JavaScript String Literal)</label>
          <pre class="output mono" id="jsStrOut"></pre>
          
          <div class="toolbar">
            <button class="btn secondary small" data-action="clear" data-target="jsStrIn,jsStrOut">Clear</button>
            <button class="btn small" data-copy="jsStrOut">Copy Output</button>
            <button class="btn" id="jsStrRun">Convert</button>
          </div>
        </div>
      </div>
    </section>

    <!-- 2) JSON Prettifier -->
    <section class="tool-view" id="json-pretty-view">
      <div class="tool-content">
        <div class="tool-header">
          <h2>JSON Prettifier</h2>
          <p class="tool-description">
            Format and beautify JSON data with proper indentation for better readability.
          </p>
          <div class="tool-docs">
            <h4>Features</h4>
            <p>‚Ä¢ Validates JSON syntax and reports errors</p>
            <p>‚Ä¢ Formats with 2-space indentation</p>
            <p>‚Ä¢ Handles nested objects and arrays</p>
          </div>
        </div>
        
        <div>
          <label for="jsonPrettyIn">Input JSON</label>
          <textarea id="jsonPrettyIn" class="mono" placeholder='{"name":"example","items":[1,2,3],"nested":{"key":"value"}}'></textarea>
          
          <label style="margin-top: 16px;">Formatted Output</label>
          <textarea id="jsonPrettyOut" class="output mono" readonly></textarea>
          
          <div class="toolbar">
            <span id="jsonPrettyStatus" class="status"></span>
            <button class="btn secondary small" data-action="clear" data-target="jsonPrettyIn,jsonPrettyOut">Clear</button>
            <button class="btn small" data-copy="jsonPrettyOut">Copy Output</button>
            <button class="btn" id="jsonPrettyRun">Prettify</button>
          </div>
        </div>
      </div>
    </section>

    <!-- 3) URI Parameter Encoder -->
    <section class="tool-view" id="uri-encode-view">
      <div class="tool-content">
        <div class="tool-header">
          <h2>URI Parameter Encoder</h2>
          <p class="tool-description">
            Safely encode URL parameters and values for use in query strings.
          </p>
          <div class="tool-docs">
            <h4>When to use</h4>
            <p>Use this when building URLs with query parameters that contain special characters like spaces, ampersands, or non-ASCII characters.</p>
            <p><strong>Example:</strong> <code>search term</code> + <code>coffee & cream</code> ‚Üí <code>search%20term=coffee%20%26%20cream</code></p>
          </div>
        </div>
        
        <div>
          <div class="two">
            <div>
              <label for="uriParam">Parameter Name</label>
              <input type="text" id="uriParam" class="mono" placeholder="e.g. search term" />
            </div>
            <div>
              <label for="uriVal">Value</label>
              <input type="text" id="uriVal" class="mono" placeholder="e.g. coffee & cream" />
            </div>
          </div>
          
          <label>Encoded Result</label>
          <input type="text" id="uriOut" class="mono" readonly placeholder="param=value" />
          
          <div class="toolbar">
            <button class="btn secondary small" data-action="clear" data-target="uriParam,uriVal,uriOut">Clear</button>
            <button class="btn small" data-copy="uriOut">Copy</button>
            <button class="btn" id="uriRun">Encode</button>
          </div>
        </div>
      </div>
    </section>

    <!-- 4) UUID Generator -->
    <section class="tool-view" id="uuid-view">
      <div class="tool-content">
        <div class="tool-header">
          <h2>UUID v4 Generator</h2>
          <p class="tool-description">
            Generate cryptographically secure UUID v4 identifiers.
          </p>
          <div class="tool-docs">
            <h4>Technical Details</h4>
            <p>‚Ä¢ Uses <code>crypto.randomUUID()</code> when available</p>
            <p>‚Ä¢ Falls back to secure random generation using <code>crypto.getRandomValues()</code></p>
            <p>‚Ä¢ Generates RFC 4122 compliant version 4 UUIDs</p>
          </div>
        </div>
        
        <div>
          <label>Generated UUID</label>
          <input type="text" id="uuidOut" class="mono" readonly placeholder="Click Generate to create a new UUID" />
          
          <div class="toolbar">
            <button class="btn secondary small" data-copy="uuidOut">Copy</button>
            <button class="btn" id="uuidRun">Generate New UUID</button>
          </div>
        </div>
      </div>
    </section>

    <!-- 5) Base64 Encoder/Decoder -->
    <section class="tool-view" id="b64-view">
      <div class="tool-content">
        <div class="tool-header">
          <h2>Base64 Encoder / Decoder</h2>
          <p class="tool-description">
            Convert between text and Base64 encoding. UTF-8 safe for international characters.
          </p>
          <div class="tool-docs">
            <h4>Features</h4>
            <p>‚Ä¢ Handles multi-byte UTF-8 characters correctly</p>
            <p>‚Ä¢ Bidirectional conversion between text and Base64</p>
            <p>‚Ä¢ Commonly used for encoding binary data in text format</p>
          </div>
        </div>
        
        <div>
          <div class="two">
            <div>
              <label for="b64Text">Plain Text</label>
              <textarea id="b64Text" class="mono" placeholder="Enter text to encode"></textarea>
              <div class="toolbar">
                <button class="btn secondary small" data-action="clear" data-target="b64Text">Clear</button>
                <button class="btn" id="b64Encode">Encode ‚Üí</button>
              </div>
            </div>
            <div>
              <label for="b64Out">Base64</label>
              <textarea id="b64Out" class="output mono" placeholder="Base64 encoded result"></textarea>
              <div class="toolbar">
                <button class="btn secondary small" id="b64Decode">‚Üê Decode</button>
                <button class="btn small" data-copy="b64Out">Copy</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 6) SHA-256 Hash -->
    <section class="tool-view" id="sha256-view">
      <div class="tool-content">
        <div class="tool-header">
          <h2>SHA-256 Hash Generator</h2>
          <p class="tool-description">
            Generate SHA-256 cryptographic hashes from any text input.
          </p>
          <div class="tool-docs">
            <h4>About SHA-256</h4>
            <p>‚Ä¢ Produces a 256-bit (64 hexadecimal character) hash</p>
            <p>‚Ä¢ One-way function - cannot be reversed to get original input</p>
            <p>‚Ä¢ Uses browser's native SubtleCrypto API for secure hashing</p>
          </div>
        </div>
        
        <div>
          <label for="shaIn">Input Text</label>
          <textarea id="shaIn" class="mono" placeholder="Enter text to hash"></textarea>
          
          <label style="margin-top: 16px;">SHA-256 Hash (Hex)</label>
          <input type="text" id="shaOut" class="mono" readonly />
          
          <div class="toolbar">
            <span id="shaStatus" class="status"></span>
            <button class="btn secondary small" data-action="clear" data-target="shaIn,shaOut">Clear</button>
            <button class="btn small" data-copy="shaOut">Copy</button>
            <button class="btn" id="shaRun">Generate Hash</button>
          </div>
        </div>
      </div>
    </section>

    <!-- 7) Case Converters -->
    <section class="tool-view" id="case-view">
      <div class="tool-content">
        <div class="tool-header">
          <h2>Case Converters</h2>
          <p class="tool-description">
            Convert text between different naming conventions and case styles.
          </p>
          <div class="tool-docs">
            <h4>Supported Formats</h4>
            <p>‚Ä¢ <strong>camelCase:</strong> variableName, getUserData</p>
            <p>‚Ä¢ <strong>snake_case:</strong> variable_name, get_user_data</p>
            <p>‚Ä¢ <strong>kebab-case:</strong> variable-name, get-user-data</p>
            <p>‚Ä¢ <strong>Title Case:</strong> Variable Name, Get User Data</p>
          </div>
        </div>
        
        <div>
          <label for="caseIn">Input Text</label>
          <textarea id="caseIn" placeholder="Enter text in any format" class="mono"></textarea>
          
          <div style="margin-top: 16px;">
            <div class="two">
              <div>
                <label>camelCase</label>
                <input type="text" id="caseCamel" class="mono" readonly />
              </div>
              <div>
                <label>snake_case</label>
                <input type="text" id="caseSnake" class="mono" readonly />
              </div>
            </div>
            <div class="two">
              <div>
                <label>kebab-case</label>
                <input type="text" id="caseKebab" class="mono" readonly />
              </div>
              <div>
                <label>Title Case</label>
                <input type="text" id="caseTitle" class="mono" readonly />
              </div>
            </div>
          </div>
          
          <div class="toolbar">
            <button class="btn secondary small" data-action="clear" data-target="caseIn,caseCamel,caseSnake,caseKebab,caseTitle">Clear</button>
            <button class="btn" id="caseRun">Convert All</button>
          </div>
        </div>
      </div>
    </section>

    <!-- 8) Unix Timestamp ‚áÑ ISO 8601 -->
    <section class="tool-view" id="time-view">
      <div class="tool-content">
        <div class="tool-header">
          <h2>Unix Timestamp ‚áÑ ISO 8601</h2>
          <p class="tool-description">
            Convert between Unix timestamps and ISO 8601 date/time format.
          </p>
          <div class="tool-docs">
            <h4>Format Information</h4>
            <p>‚Ä¢ <strong>Unix timestamp:</strong> Seconds or milliseconds since January 1, 1970 UTC</p>
            <p>‚Ä¢ <strong>ISO 8601:</strong> International standard date format (e.g., 2025-08-11T12:34:56Z)</p>
            <p>‚Ä¢ Automatically detects seconds vs milliseconds based on magnitude</p>
          </div>
        </div>
        
        <div>
          <div class="two">
            <div>
              <label>Unix Timestamp (seconds or ms)</label>
              <input type="text" id="tsIn" class="mono" placeholder="e.g. 1723333333 or 1723333333000" />
            </div>
            <div>
              <label>ISO 8601 Date</label>
              <input type="text" id="isoIn" class="mono" placeholder="e.g. 2025-08-11T12:34:56Z" />
            </div>
          </div>
          
          <div class="two">
            <div>
              <label>‚Üí ISO 8601 Output</label>
              <input type="text" id="tsToIso" class="mono" readonly />
            </div>
            <div>
              <label>‚Üí Unix Timestamp (ms)</label>
              <input type="text" id="isoToTs" class="mono" readonly />
            </div>
          </div>
          
          <div class="toolbar">
            <span id="timeStatus" class="status"></span>
            <button class="btn secondary small" data-action="clear" data-target="tsIn,isoIn,tsToIso,isoToTs">Clear</button>
            <button class="btn" id="timeRun">Convert</button>
          </div>
        </div>
      </div>
    </section>

    <!-- 9) JWT Decoder -->
    <section class="tool-view" id="jwt-view">
      <div class="tool-content">
        <div class="tool-header">
          <h2>JWT Decoder</h2>
          <p class="tool-description">
            Decode and inspect JSON Web Tokens (JWT) without signature verification.
          </p>
          <div class="tool-docs">
            <h4>Important Notes</h4>
            <p>‚ö†Ô∏è This tool is for inspection only and does NOT verify signatures</p>
            <p>‚Ä¢ Decodes the header and payload sections of a JWT</p>
            <p>‚Ä¢ Useful for debugging and inspecting token contents</p>
            <p>‚Ä¢ Never trust decoded tokens without proper server-side verification</p>
          </div>
        </div>
        
        <div>
          <label for="jwtIn">JWT Token</label>
          <textarea id="jwtIn" class="mono" placeholder="Paste a JWT token (header.payload.signature)"></textarea>
          
          <div class="two" style="margin-top: 16px;">
            <div>
              <label>Decoded Header</label>
              <textarea id="jwtHeader" class="output mono" readonly></textarea>
            </div>
            <div>
              <label>Decoded Payload</label>
              <textarea id="jwtPayload" class="output mono" readonly></textarea>
            </div>
          </div>
          
          <div class="toolbar">
            <button class="btn secondary small" data-action="clear" data-target="jwtIn,jwtHeader,jwtPayload">Clear</button>
            <button class="btn" id="jwtRun">Decode Token</button>
          </div>
        </div>
      </div>
    </section>

  </main>
</div>

<script>
  // ---------- Tool Registry ----------
  const tools = [
    {
      id: 'js-string',
      name: 'Text ‚Üí JS String',
      description: 'Convert text to JavaScript string literal',
      tags: ['escape', 'quotes']
    },
    {
      id: 'json-pretty',
      name: 'JSON Prettifier',
      description: 'Format and beautify JSON data',
      tags: ['format', 'validate']
    },
    {
      id: 'uri-encode',
      name: 'URI Encoder',
      description: 'Encode URL parameters safely',
      tags: ['url', 'query']
    },
    {
      id: 'uuid',
      name: 'UUID Generator',
      description: 'Generate UUID v4 identifiers',
      tags: ['random', 'guid']
    },
    {
      id: 'b64',
      name: 'Base64 Encode/Decode',
      description: 'Convert between text and Base64',
      tags: ['encode', 'decode']
    },
    {
      id: 'sha256',
      name: 'SHA-256 Hash',
      description: 'Generate cryptographic hashes',
      tags: ['crypto', 'hash']
    },
    {
      id: 'case',
      name: 'Case Converters',
      description: 'Convert between naming conventions',
      tags: ['camel', 'snake', 'kebab']
    },
    {
      id: 'time',
      name: 'Timestamp ‚áÑ ISO',
      description: 'Convert Unix timestamps to dates',
      tags: ['date', 'unix', 'iso']
    },
    {
      id: 'jwt',
      name: 'JWT Decoder',
      description: 'Decode and inspect JWT tokens',
      tags: ['token', 'auth']
    }
  ];

  // ---------- Utilities ----------
  const $ = sel => document.querySelector(sel);
  const on = (el, evt, fn) => el?.addEventListener(evt, fn);

  function copyFrom(id) {
    const el = document.getElementById(id);
    if (!el) return;
    const text = (el.tagName === 'TEXTAREA' || el.tagName === 'INPUT' || el.tagName === 'PRE')
      ? (el.value ?? el.textContent)
      : '';
    navigator.clipboard.writeText(text || '').then(() => flash(el, 'Copied!'), () => flash(el, 'Copy failed', true));
  }

  function flash(el, msg, isErr=false) {
    const span = document.createElement('span');
    span.textContent = msg;
    span.className = 'status ' + (isErr ? 'err' : 'ok');
    el.insertAdjacentElement('afterend', span);
    setTimeout(() => span.remove(), 1200);
  }

  function clearTargets(list) {
    const ids = list.split(',').map(s => s.trim());
    ids.forEach(id => {
      const el = document.getElementById(id);
      if (!el) return;
      if (el.tagName === 'TEXTAREA' || el.tagName === 'INPUT') el.value = '';
      else el.textContent = '';
    });
  }

  // ---------- Tool List & Navigation ----------
  let currentTool = null;
  let filteredTools = [...tools];
  let selectedIndex = -1;

  function renderToolList() {
    const list = $('#toolList');
    list.innerHTML = filteredTools.map((tool, idx) => `
      <div class="tool-item ${tool.id === currentTool ? 'active' : ''}" 
           data-tool="${tool.id}" 
           data-index="${idx}">
        <h3>${tool.name}</h3>
        <div class="desc">${tool.description}</div>
      </div>
    `).join('');
  }

  function selectTool(toolId) {
    // Hide welcome screen
    $('#welcomeScreen').style.display = 'none';
    
    // Hide all tool views
    document.querySelectorAll('.tool-view').forEach(v => v.classList.remove('active'));
    
    // Show selected tool
    const view = $(`#${toolId}-view`);
    if (view) {
      view.classList.add('active');
      currentTool = toolId;
      renderToolList();
      
      // Focus first input/textarea
      setTimeout(() => {
        const input = view.querySelector('textarea, input[type="text"]:not([readonly])');
        if (input) input.focus();
      }, 100);
    }
  }

  // Search functionality
  const searchInput = $('#searchInput');
  
  function filterTools(query) {
    if (!query) {
      filteredTools = [...tools];
    } else {
      const q = query.toLowerCase();
      filteredTools = tools.filter(tool => 
        tool.name.toLowerCase().includes(q) ||
        tool.description.toLowerCase().includes(q) ||
        tool.tags.some(tag => tag.includes(q))
      );
    }
    selectedIndex = -1;
    renderToolList();
  }

  on(searchInput, 'input', (e) => {
    filterTools(e.target.value);
  });

  // Keyboard navigation
  on(document, 'keydown', (e) => {
    // Cmd+K to focus search
    if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
      e.preventDefault();
      searchInput.focus();
      searchInput.select();
      return;
    }
    
    // Navigation when search is focused
    if (document.activeElement === searchInput) {
      if (e.key === 'ArrowDown') {
        e.preventDefault();
        selectedIndex = Math.min(selectedIndex + 1, filteredTools.length - 1);
        updateSelection();
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        selectedIndex = Math.max(selectedIndex - 1, -1);
        updateSelection();
      } else if (e.key === 'Enter' && selectedIndex >= 0) {
        e.preventDefault();
        selectTool(filteredTools[selectedIndex].id);
        searchInput.blur();
      } else if (e.key === 'Escape') {
        searchInput.value = '';
        filterTools('');
        searchInput.blur();
      }
    }
  });

  function updateSelection() {
    document.querySelectorAll('.tool-item').forEach((item, idx) => {
      if (idx === selectedIndex) {
        item.style.background = 'rgba(34, 211, 238, 0.1)';
        item.scrollIntoView({ block: 'nearest' });
      } else if (item.dataset.tool !== currentTool) {
        item.style.background = '';
      }
    });
  }

  // Click handler for tool selection
  on($('#toolList'), 'click', (e) => {
    const item = e.target.closest('.tool-item');
    if (item) {
      selectTool(item.dataset.tool);
    }
  });

  // ---------- Tool Implementations ----------
  
  // UTF-8 safe Base64 helpers
  const utf8enc = new TextEncoder();
  const utf8dec = new TextDecoder();
  const b64encode = (str) => {
    const bytes = utf8enc.encode(str);
    let bin = '';
    bytes.forEach(b => bin += String.fromCharCode(b));
    return btoa(bin);
  };
  const b64decode = (b64) => {
    const bin = atob(b64);
    const bytes = Uint8Array.from([...bin].map(ch => ch.charCodeAt(0)));
    return utf8dec.decode(bytes);
  };

  // Base64URL ‚Üí Base64
  const b64urlToB64 = s => s.replace(/-/g, '+').replace(/_/g, '/').padEnd(Math.ceil(s.length / 4) * 4, '=');

  // Case conversion helpers
  function tokenize(str) {
    return (str || '')
      .replace(/[_\-]+/g, ' ')
      .replace(/([a-z0-9])([A-Z])/g, '$1 $2')
      .trim()
      .split(/\s+/);
  }
  const toCamel = str => {
    const parts = tokenize(str).map(p => p.toLowerCase());
    return parts.map((p, i) => i ? p.charAt(0).toUpperCase() + p.slice(1) : p).join('');
  };
  const toSnake = str => tokenize(str).map(p => p.toLowerCase()).join('_');
  const toKebab = str => tokenize(str).map(p => p.toLowerCase()).join('-');
  const toTitle = str => tokenize(str).map(p => p.charAt(0).toUpperCase() + p.slice(1).toLowerCase()).join(' ');

  // UUID v4 generator
  function uuidv4() {
    if (crypto && crypto.randomUUID) return crypto.randomUUID();
    const rnds = crypto.getRandomValues(new Uint8Array(16));
    rnds[6] = (rnds[6] & 0x0f) | 0x40;
    rnds[8] = (rnds[8] & 0x3f) | 0x80;
    const hex = [...rnds].map(b => b.toString(16).padStart(2, '0'));
    return `${hex[0]}${hex[1]}${hex[2]}${hex[3]}-${hex[4]}${hex[5]}-${hex[6]}${hex[7]}-${hex[8]}${hex[9]}-${hex[10]}${hex[11]}${hex[12]}${hex[13]}${hex[14]}${hex[15]}`;
  }

  // SHA-256 hash
  async function sha256(str) {
    const data = utf8enc.encode(str);
    const digest = await crypto.subtle.digest('SHA-256', data);
    return [...new Uint8Array(digest)].map(b => b.toString(16).padStart(2, '0')).join('');
  }

  // ---------- Tool Event Handlers ----------
  
  // 1) Text ‚Üí JS string
  on($('#jsStrRun'), 'click', () => {
    const input = $('#jsStrIn').value ?? '';
    $('#jsStrOut').textContent = JSON.stringify(input);
  });

  // 2) Prettify JSON
  on($('#jsonPrettyRun'), 'click', () => {
    const status = $('#jsonPrettyStatus');
    status.textContent = '';
    try {
      const obj = JSON.parse($('#jsonPrettyIn').value);
      $('#jsonPrettyOut').value = JSON.stringify(obj, null, 2);
      status.textContent = 'Valid JSON';
      status.className = 'status ok';
    } catch (err) {
      $('#jsonPrettyOut').value = '';
      status.textContent = 'Invalid JSON: ' + err.message;
      status.className = 'status err';
    }
  });

  // 3) URI encode
  on($('#uriRun'), 'click', () => {
    const k = $('#uriParam').value ?? '';
    const v = $('#uriVal').value ?? '';
    $('#uriOut').value = encodeURIComponent(k) + '=' + encodeURIComponent(v);
  });

  // 4) UUID
  on($('#uuidRun'), 'click', () => {
    $('#uuidOut').value = uuidv4();
  });

  // 5) Base64
  on($('#b64Encode'), 'click', () => {
    try {
      $('#b64Out').value = b64encode($('#b64Text').value || '');
    } catch (e) {
      $('#b64Out').value = 'Error encoding';
    }
  });
  on($('#b64Decode'), 'click', () => {
    try {
      $('#b64Text').value = b64decode($('#b64Out').value || '');
    } catch (e) {
      flash($('#b64Out'), 'Invalid Base64', true);
    }
  });

  // 6) SHA-256
  on($('#shaRun'), 'click', async () => {
    const status = $('#shaStatus');
    status.textContent = 'Hashing...';
    status.className = 'status';
    try {
      $('#shaOut').value = await sha256($('#shaIn').value || '');
      status.textContent = 'Done';
      status.className = 'status ok';
    } catch (e) {
      status.textContent = 'Error';
      status.className = 'status err';
    }
  });

  // 7) Case converters
  on($('#caseRun'), 'click', () => {
    const s = $('#caseIn').value || '';
    $('#caseCamel').value = toCamel(s);
    $('#caseSnake').value = toSnake(s);
    $('#caseKebab').value = toKebab(s);
    $('#caseTitle').value = toTitle(s);
  });

  // 8) Timestamp/ISO
  on($('#timeRun'), 'click', () => {
    const tsRaw = ($('#tsIn').value || '').trim();
    const isoRaw = ($('#isoIn').value || '').trim();
    const status = $('#timeStatus');
    status.textContent = '';
    status.className = 'status';

    // ts ‚Üí iso
    if (tsRaw) {
      const n = Number(tsRaw);
      if (!Number.isFinite(n)) {
        $('#tsToIso').value = '';
        status.textContent = 'Invalid timestamp';
        status.className = 'status err';
      } else {
        const ms = n > 1e12 ? n : n * 1000;
        const d = new Date(ms);
        $('#tsToIso').value = isNaN(d.getTime()) ? '' : d.toISOString();
      }
    } else {
      $('#tsToIso').value = '';
    }

    // iso ‚Üí ts
    if (isoRaw) {
      const d = new Date(isoRaw);
      if (isNaN(d.getTime())) {
        $('#isoToTs').value = '';
        status.textContent = (status.textContent ? status.textContent + ' ‚Ä¢ ' : '') + 'Invalid date';
        status.className = 'status err';
      } else {
        $('#isoToTs').value = String(d.getTime());
        if (!status.textContent) {
          status.textContent = 'Converted';
          status.className = 'status ok';
        }
      }
    } else {
      $('#isoToTs').value = '';
    }
  });

  // 9) JWT decode
  on($('#jwtRun'), 'click', () => {
    const token = ($('#jwtIn').value || '').trim();
    const [h, p] = token.split('.');
    try {
      const header = h ? JSON.parse(b64decode(b64urlToB64(h))) : {};
      const payload = p ? JSON.parse(b64decode(b64urlToB64(p))) : {};
      $('#jwtHeader').value = JSON.stringify(header, null, 2);
      $('#jwtPayload').value = JSON.stringify(payload, null, 2);
    } catch (e) {
      $('#jwtHeader').value = '';
      $('#jwtPayload').value = 'Invalid JWT: ' + e.message;
    }
  });

  // ---------- Global Event Handlers ----------
  
  // Copy and Clear buttons
  document.body.addEventListener('click', (e) => {
    const t = e.target;
    if (t.matches('[data-copy]')) {
      copyFrom(t.getAttribute('data-copy'));
    }
    if (t.matches('[data-action="clear"]')) {
      clearTargets(t.getAttribute('data-target'));
    }
  });

  // Enter key shortcuts for inputs
  const keyMap = new Map([
    ['jsStrIn', 'jsStrRun'],
    ['jsonPrettyIn', 'jsonPrettyRun'],
    ['uriVal', 'uriRun'],
    ['uriParam', 'uriRun'],
    ['shaIn', 'shaRun'],
    ['caseIn', 'caseRun'],
    ['tsIn', 'timeRun'],
    ['isoIn', 'timeRun'],
    ['jwtIn', 'jwtRun'],
  ]);
  
  document.addEventListener('keydown', (e) => {
    if (e.key !== 'Enter' || e.shiftKey || e.ctrlKey || e.metaKey || e.altKey) return;
    const id = document.activeElement?.id;
    if (keyMap.has(id)) {
      e.preventDefault();
      document.getElementById(keyMap.get(id))?.click();
    }
  });

  // Initialize
  renderToolList();
</script>

</body>
</html>